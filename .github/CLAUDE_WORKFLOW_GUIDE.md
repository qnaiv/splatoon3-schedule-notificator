# Claude段階的開発プロセス ガイド

## 概要

このプロジェクトではClaudeを使った段階的開発プロセスを採用しています。
要件定義→設計→設計確認→実装の順で進み、各段階でユーザーとの合意を取りながら確実に開発を進めます。

## 使い方

### 基本的な流れ

1. **Issueを作成**
   - 実装したい機能や修正したいバグについてIssueを作成
   - タイトルと本文で要求を明確に記載

2. **Claudeを呼び出し**
   - Issue内のコメントで `@claude` とメンション
   - コマンド不要、シンプルにメンションするだけ

3. **段階的プロセス**
   - Claudeが自動的に適切なフェーズを判定
   - 各フェーズで必要な情報を提供し、次に進む

## 各フェーズの詳細

### 1. 📋 要件定義フェーズ
- **ラベル**: `phase:requirements`
- **Claudeの行動**:
  - Issue内容の詳細分析
  - 要件の整理と明確化
  - 不明点や懸念点の質問
  - 技術的制約の確認

- **ユーザーの対応**:
  - Claudeからの質問に回答
  - 追加の要求があれば説明
  - 優先度やスコープの調整

- **次のステップ**:
  - 不明点が解消されたら `@claude` で設計フェーズへ

### 2. 🏗️ 設計フェーズ
- **ラベル**: `phase:design`
- **Claudeの行動**:
  - アーキテクチャ設計
  - ファイル構成の提案
  - 技術選定と根拠説明
  - 実装方針の詳細化

- **ユーザーの対応**:
  - 設計内容の確認
  - 疑問点や改善案があれば指摘
  - 技術選定への意見

- **次のステップ**:
  - 設計に疑問がなければ `@claude` で設計確認フェーズへ
  - 疑問点があれば議論を継続

### 3. 🔍 設計確認フェーズ
- **ラベル**: `phase:design-review`
- **Claudeの行動**:
  - 設計内容の最終サマリー
  - 実装予定の具体的提示
  - 影響範囲の明確化
  - 実装承認の要求

- **ユーザーの対応**:
  - 設計内容の最終確認
  - **明示的な実装承認**が必要
  - 「実装お願いします」等の承認コメント

- **次のステップ**:
  - 承認後に `@claude` で実装フェーズへ

### 4. 🚀 実装フェーズ
- **ラベル**: `phase:implementation`
- **Claudeの行動**:
  - 設計に基づく実装
  - コード品質チェック（lint, typecheck）
  - 必要に応じてテスト作成
  - PR作成とIssueクローズ

- **完了**:
  - PRが作成され、Issueがクローズされます

## ラベル管理

各フェーズで以下のラベルが自動的に設定されます：

| ラベル | 意味 |
|--------|------|
| `phase:requirements` | 要件定義中 |
| `phase:design` | 設計中 |
| `phase:design-review` | 設計確認中 |
| `phase:implementation` | 実装中 |
| `phase:completed` | 完了 |

## 使用例

```markdown
# Issue例
## タイトル
WebUIに現在時刻表示機能を追加

## 本文
ユーザーがWebUIで現在時刻を確認できるよう、時刻表示コンポーネントを追加してください。

要件：
- リアルタイム更新
- 日本時間で表示
- 既存デザインに合わせたスタイル

@claude お願いします！
```

### 実際の会話例

1. **要件定義**
```
Claude: 📋 要件定義フェーズ

理解した要件：
- WebUIに時刻表示コンポーネント追加
- リアルタイム更新機能
- 日本時間（JST）での表示

確認したい点：
1. 更新頻度はどの程度が適切でしょうか？（1秒ごと？）
2. 表示形式の希望はありますか？（24時間表記等）
3. 配置場所に希望はありますか？

次回：回答後、設計フェーズに進みます。
```

2. **設計**
```
User: 1秒更新、24時間表記、右上に配置希望です。

Claude: 🏗️ 設計フェーズ

アーキテクチャ設計：
Reactのカスタムフックで時刻管理、1秒間隔のsetInterval使用

ファイル構成：
- src/components/CurrentTime.tsx: 時刻表示コンポーネント
- src/hooks/useCurrentTime.ts: 時刻管理カスタムフック

実装方針：
1. useCurrentTimeフックで現在時刻を管理
2. Intl.DateTimeFormatでJST変換
3. 既存のヘッダーコンポーネントに統合
```

3. **実装承認**
```
Claude: 🔍 設計確認フェーズ

最終設計サマリー：
- 1秒更新のリアルタイム時刻表示
- 24時間形式、JST表示
- 右上配置

実装承認をお願いします。

User: 実装お願いします！

Claude: 🚀 実装フェーズ開始...
```

## 重要なポイント

### ✅ Do（推奨）
- 各フェーズで出された質問には具体的に回答
- 設計確認フェーズでは明示的に承認
- 要求の変更があれば早めに伝える

### ❌ Don't（非推奨）
- フェーズを飛ばそうとしない
- 曖昧な回答で進めない
- 実装承認なしに進めさせない

## トラブルシューティング

### 想定と異なるフェーズが開始された
- Issue内容の明確化が不足している可能性
- より詳細な説明を追加してから `@claude` でやり直し

### 設計が気に入らない
- 設計フェーズで遠慮なく修正依頼
- 実装前なら変更は容易

### 実装結果が期待と違う
- 要件定義や設計確認が不十分だった可能性
- 新しいIssueで修正依頼、またはPRでレビューコメント

## 利点

- **認識齟齬の削減**: 各段階で合意を取るため
- **品質向上**: 設計レビューにより実装前に問題を発見
- **開発効率**: 段階的に進むことで手戻りを最小化
- **学習機会**: 設計思想を理解できる

このプロセスにより、一発実装による認識違いを防ぎ、確実で高品質な開発を実現します。